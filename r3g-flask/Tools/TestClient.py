# Définition d'un client réseau rudimentaire
# Ce client dialogue avec un serveur ad hoc

import socket, sys
import time

HOST = 'localhost'
PORT = 80

# 1) création du socket :
mySocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
data = ["1;0.059680 -0.041831 3.000605 0.039789 0.266393 3.002268 0.019786 0.566395 2.991151 0.042975 0.711113 2.998729 -0.110806 0.430882 2.931498 -0.086738 0.200455 2.859602 0.078230 0.095513 2.826501 0.111084 0.066284 2.843162 0.188411 0.434582 3.035657 0.198458 0.206480 2.969778 0.159803 0.042872 2.856454 0.123227 -0.025560 2.856307 -0.005511 -0.039364 2.938238 -0.034212 -0.397215 2.981473 -0.000090 -0.733513 3.014066 0.017521 -0.810704 2.932503 0.123277 -0.043383 2.988767 0.199867 -0.414061 3.000896 0.210138 -0.768067 3.098030 0.253260 -0.819587 3.062866 0.024796 0.492537 2.996256 0.170385 0.025720 2.856169 0.119583 0.030126 2.831000 0.092091 -0.098818 2.822015 0.143726 -0.051524 2.828400 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000\n"
"2;0.158167 -0.022341 3.112661 0.136885 0.288896 3.089020 0.115548 0.592472 3.053556 0.150139 0.732010 3.066237 -0.011136 0.460084 2.988451 -0.060940 0.196018 2.954834 -0.027520 -0.007456 2.914176 -0.010546 -0.070793 2.917002 0.262534 0.458156 3.146198 0.299306 0.199977 3.159721 0.309146 0.002524 3.118077 0.299935 -0.057630 3.111885 0.093796 -0.023472 3.044115 0.020829 -0.404756 3.049929 -0.034101 -0.752599 3.030895 -0.016559 -0.819358 2.937114 0.218513 -0.020695 3.107164 0.180528 -0.397691 3.171350 0.176145 -0.761370 3.211027 0.218398 -0.811526 3.167335 0.120892 0.517704 3.064661 0.006816 -0.147011 2.914869 -0.045177 -0.070263 2.895875 0.299682 -0.139425 3.113037 0.267417 -0.057961 3.071821 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000\n",
"3;0.158170 -0.022325 3.112509 0.136951 0.288914 3.088915 0.115714 0.592478 3.053415 0.151078 0.731342 3.065964 -0.010625 0.459959 2.988121 -0.060930 0.195991 2.954474 -0.027546 -0.007289 2.914087 -0.009614 -0.071493 2.913981 0.262665 0.458164 3.146024 0.299203 0.199585 3.158809 0.309502 0.003101 3.118031 0.298549 -0.057061 3.102160 0.093884 -0.023347 3.043475 0.021022 -0.404822 3.049929 -0.033595 -0.750983 3.029814 -0.016220 -0.819234 2.936435 0.218506 -0.020703 3.107162 0.180752 -0.398580 3.171297 0.176042 -0.760069 3.211354 0.217730 -0.810632 3.167469 0.121030 0.517714 3.064535 0.006798 -0.146847 2.911596 -0.042195 -0.079189 2.889853 0.296948 -0.130053 3.104207 0.270080 -0.062551 3.061333 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000\n",
"4;0.158322 -0.022478 3.112226 0.137203 0.288898 3.088619 0.116134 0.592597 3.052974 0.152217 0.731097 3.065031 -0.007140 0.459925 2.986876 -0.060565 0.196497 2.954445 -0.027451 -0.006489 2.913913 -0.008647 -0.070974 2.911672 0.262748 0.458230 3.145875 0.299037 0.199325 3.158133 0.309082 -0.000808 3.116815 0.297540 -0.063045 3.102448 0.094246 -0.023505 3.042666 0.022171 -0.406854 3.050342 -0.033863 -0.751434 3.030537 -0.016416 -0.819143 2.936376 0.218559 -0.020836 3.107124 0.180788 -0.398619 3.171183 0.176582 -0.758767 3.210975 0.216526 -0.810692 3.167846 0.121405 0.517796 3.064143 0.006812 -0.146857 2.911778 -0.043749 -0.083141 2.896834 0.299222 -0.139212 3.108205 0.266279 -0.064480 3.069613 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000\n",
"5;0.159406 -0.021748 3.103747 0.137104 0.289680 3.087385 0.114667 0.593299 3.057586 0.147924 0.732457 3.071606 -0.008920 0.459163 2.989625 -0.047867 0.199377 2.946970 0.000442 0.008974 2.903186 0.024315 -0.061152 2.898672 0.268744 0.459461 3.146280 0.296083 0.221459 3.120208 0.304691 0.023423 3.050699 0.281471 -0.034230 3.037893 0.094546 -0.022385 3.033870 0.021759 -0.400589 3.044924 -0.032128 -0.752632 3.030727 -0.015117 -0.820203 2.935196 0.220443 -0.020510 3.099040 0.182110 -0.399589 3.167957 0.175921 -0.758203 3.213202 0.215836 -0.809944 3.169142 0.120494 0.518587 3.067379 0.047307 -0.135673 2.893937 -0.014316 -0.065601 2.892286 0.278215 -0.111689 3.037697 0.246206 -0.041435 3.010529 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000\n",
"5;0.159212 -0.021939 3.103708 0.136713 0.289434 3.087303 0.114017 0.592970 3.057553 0.147409 0.732423 3.071479 -0.009294 0.458953 2.989790 -0.048087 0.199566 2.947274 0.000499 0.008422 2.903374 0.023369 -0.062197 2.901033 0.268721 0.458978 3.146207 0.296175 0.221835 3.120194 0.305083 0.027039 3.051941 0.281517 -0.032846 3.042839 0.094394 -0.022542 3.033939 0.022670 -0.400625 3.045356 -0.031722 -0.752303 3.030590 -0.015157 -0.820208 2.935309 0.220170 -0.020774 3.098866 0.182263 -0.399250 3.167408 0.176087 -0.756998 3.213180 0.215396 -0.809176 3.169186 0.119876 0.518265 3.067324 0.049488 -0.135513 2.902150 -0.005501 -0.063197 2.871941 0.276549 -0.111381 3.045556 0.245483 -0.029813 3.024571 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000\n",
"7;0.160080 -0.021885 3.104633 0.136832 0.289269 3.087720 0.113684 0.592501 3.057990 0.146075 0.732329 3.071774 -0.010952 0.458123 2.991437 -0.048504 0.200385 2.949047 -0.000165 0.009088 2.904246 0.022448 -0.065817 2.907186 0.268506 0.458329 3.146612 0.296265 0.223037 3.121696 0.305234 0.029653 3.055108 0.281690 -0.026750 3.048523 0.094971 -0.022575 3.034542 0.024833 -0.402787 3.049241 -0.031884 -0.752949 3.033770 -0.014911 -0.819982 2.936645 0.221388 -0.020604 3.100249 0.182522 -0.401566 3.168193 0.176337 -0.757533 3.213987 0.215646 -0.809598 3.169282 0.119667 0.517897 3.067735 0.047361 -0.137141 2.910340 -0.012549 -0.067335 2.892059 0.279575 -0.101728 3.048223 0.247391 -0.025956 3.024926 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000\n",]

# 2) envoi d'une requête de connexion au serveur :
try:
    mySocket.connect((HOST, PORT))
except socket.error:
    print("La connexion a échoué.")
    sys.exit()
print("Connexion établie avec le serveur.")

# 3) Dialogue avec le serveur :
msgServeur = mySocket.recv(1024).decode("Utf8")
print("S>", msgServeur)

msgClient = input("path model : ")
mySocket.send(msgClient.encode("Utf8"))
time.sleep(2)
i = 0
while 1:
    if msgServeur.upper() == "FIN" or msgServeur == "":
        break
    msgClient = data[i%len(data)]
    mySocket.send(msgClient.encode("Utf8"))
    time.sleep(0.1)
    i+=1
    # msgServeur = mySocket.recv(1024).decode("Utf8")

# 4) Fermeture de la connexion :
print("Connexion interrompue.")
mySocket.close()